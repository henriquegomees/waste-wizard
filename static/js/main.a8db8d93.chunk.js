(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{189:function(e,t,n){},191:function(e,t,n){},193:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(63),s=n.n(i),u=n(7),c=n(3),o=n(65),l=n.n(o),p=n(66),f=n(67),h=n.n(f),m=n(16),v={materials:[],searchResults:[],favourites:[]},d=Object(c.c)({waste:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DATA":return Object(m.a)({},e,{materials:t.payload});case"FETCH_FAVOURITES":return Object(m.a)({},e,{favourites:t.favourites});case"SEARCH_RESULTS":case"CLEAR_RESULTS":return Object(m.a)({},e,{searchResults:t.payload});case"ADD_FAVOURITE":var n=e.favourites.slice(),r=e.searchResults.slice();return n.push(t.material),Object(m.a)({},e,{favourites:n,searchResults:r.map(function(e){return e.title===t.material.title?Object(m.a)({},e,{isFav:!0}):e})});case"REMOVE_FAVOURITE":var a=e.searchResults.slice();return Object(m.a)({},e,{searchResults:a.map(function(e){return e.title===t.material.title?Object(m.a)({},e,{isFav:!1}):e})});default:return e}}}),b=(n(40),n(11)),E=n(12),O=n(14),j=n(13),w=n(15),y=n(71),_=n.n(y),R=n(69),k=n.n(R),S=(n(93),n(2)),F=n.n(S),T=n(9),g=n(68),C=n.n(g),x="favouritesMaterials",A={get:function(){var e=Object(T.a)(F.a.mark(function e(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(localStorage.getItem(x));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),set:function(){var e=Object(T.a)(F.a.mark(function e(t){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.setItem(x,JSON.stringify(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},N=function(){var e=Object(T.a)(F.a.mark(function e(){var t;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("https://secure.toronto.ca/cc_sr_v1/data/swm_waste_wizard_APR?limit=1000");case 2:return t=e.sent,e.abrupt("return",function(e){return e({type:"FETCH_DATA",payload:t.data})});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(T.a)(F.a.mark(function e(){var t;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get();case 2:return t=e.sent,e.abrupt("return",function(e){return e({type:"FETCH_FAVOURITES",favourites:t})});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(T.a)(F.a.mark(function e(t){var n,r,a,i;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get();case 2:return n=e.sent,i=[],t.map(function(e,t){return r=!!n.find(function(t){return t.title===e.title}),a={id:e.id||t,title:e.title,description:e.body,isFav:r},i.push(a)}),e.abrupt("return",function(e){return e({type:"SEARCH_RESULTS",payload:i})});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),L=function(){return function(e){return e({type:"CLEAR_RESULTS",payload:[]})}},M=function(){var e=Object(T.a)(F.a.mark(function e(t){var n;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get();case 2:return(n=e.sent).push(t),e.next=6,A.set(n);case 6:return e.abrupt("return",function(e){return e({type:"ADD_FAVOURITE",material:t})});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(T.a)(F.a.mark(function e(t){var n,r;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get();case 2:return n=e.sent,r=n.findIndex(function(e){return e.title===t.title}),n.splice(r,1),e.next=7,A.set(n);case 7:return e.abrupt("return",function(e){e(D()),e({type:"REMOVE_FAVOURITE",material:t})});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),H=function(e){function t(){var e,n;Object(b.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(a)))).state={input:""},n}return Object(w.a)(t,e),Object(E.a)(t,[{key:"_handleInputChange",value:function(e){this.setState({input:e.target.value}),""===e.target.value&&this.props.clearResults()}},{key:"_handleSubmit",value:function(e){e.preventDefault();var t=this.state.input,n=this.props.wasteMaterials;if(""!==t){var r=[];n.map(function(e){return-1!==e.keywords.search(t.toLowerCase())&&r.push(e)}),r.length>0?this.props.searchResults(r):alert("Material not found.")}else alert("Search field is required")}},{key:"render",value:function(){return a.a.createElement("form",{id:"search-form",onSubmit:this._handleSubmit.bind(this)},a.a.createElement("input",{type:"text",placeholder:"Search",value:this.state.input,onChange:this._handleInputChange.bind(this)}),a.a.createElement("button",{type:"submit"},a.a.createElement(k.a,{fontSize:"large",id:"search-icon"})))}}]),t}(r.Component),V=Object(u.b)(function(e){return{wasteMaterials:e.waste.materials}},function(e){return Object(c.b)({searchResults:I,clearResults:L},e)})(H),J=n(70),X=n.n(J),z=(n(189),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(O.a)(this,Object(j.a)(t).call(this,e))).item=a.a.createRef(),n}return Object(w.a)(t,e),Object(E.a)(t,[{key:"_parseStrToHTML",value:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}},{key:"componentDidMount",value:function(){var e=this.item.current,t=this._parseStrToHTML(this.props.description);e.insertAdjacentHTML("beforeend",t)}},{key:"render",value:function(){return a.a.createElement("li",{className:"row"},a.a.createElement("div",{className:"name"},a.a.createElement("button",{className:"star-btn",onClick:this.props.onClick,title:this.props.title},a.a.createElement(X.a,{id:"star-icon",className:this.props.isFav?"favorited":""})),a.a.createElement("h2",null,this.props.name)),a.a.createElement("div",{className:"description",ref:this.item}))}}]),t}(r.Component)),q=(n(191),function(e){function t(){return Object(b.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(E.a)(t,[{key:"_handleClick",value:function(e){!0===e.isFav?this.props.removeFavourite(e):this.props.addFavourite(e)}},{key:"render",value:function(){var e=this;return a.a.createElement("section",{id:"results-container"},a.a.createElement("ul",{className:"material-list"},this.props.results.map(function(t,n){return a.a.createElement(z,{key:n,name:t.title,isFav:t.isFav,onClick:function(){return e._handleClick(t)},description:t.description,title:!0===t.isFav?"Remove from favourites":"Add to favourites"})})))}}]),t}(r.Component)),B=Object(u.b)(function(e){return{results:e.waste.searchResults}},function(e){return Object(c.b)({addFavourite:M,removeFavourite:U},e)})(q),P=(n(193),Object(u.b)(function(e){return{favourites:e.waste.favourites}},function(e){return Object(c.b)({removeFavourite:U},e)})(function(e){return a.a.createElement("section",{id:"favourites-container"},a.a.createElement("div",{className:"container"},a.a.createElement("header",null,a.a.createElement("h2",null,"Favourites")),a.a.createElement("ul",{className:"material-list"},e.favourites.map(function(t,n){return a.a.createElement(z,{key:n,name:t.title,onClick:function(){return e.removeFavourite(t,n)},description:t.description,title:"Remove from favourites"})}))))})),W=function(e){function t(){return Object(b.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchData(),this.props.fetchFavourites()}},{key:"render",value:function(){return 0===this.props.materials.length?a.a.createElement("div",{className:"progress-wrapper"},a.a.createElement(_.a,null)):a.a.createElement("div",{id:"app"},a.a.createElement("header",null,a.a.createElement("h1",null,"Toronto Waste Lookup")),a.a.createElement("div",{className:"container"},a.a.createElement(V,null),a.a.createElement(B,null)),this.props.favourites.length>0&&a.a.createElement(P,null))}}]),t}(r.Component),G=Object(u.b)(function(e){return{favourites:e.waste.favourites,materials:e.waste.materials}},function(e){return Object(c.b)({fetchData:N,fetchFavourites:D},e)})(W),K=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Q=Object(c.a)(h.a,l.a,p.a)(c.d)(d,K);s.a.render(a.a.createElement(u.a,{store:Q},a.a.createElement(G,null)),document.getElementById("root"))},40:function(e,t,n){},72:function(e,t,n){e.exports=n(196)},93:function(e,t,n){}},[[72,2,1]]]);
//# sourceMappingURL=main.a8db8d93.chunk.js.map